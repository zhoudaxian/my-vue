{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observer/array.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parseHTML.js","../../src/compiler/genCode.js","../../src/compiler/index.js","../../src/observer/warcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/create-element.js","../../src/render.js","../../src/index.js"],"sourcesContent":["\nfunction toCaption (str) {\n  if (typeof str !== 'string') throw Error('toCaption\\'s parmas must be a string')\n\n  return str.slice(0, 1).toUpperCase() + str.slice(1)\n}\n\nexport function isObject (data) {\n  return data && typeof data === 'object'\n}\n\nexport function isType (data, type) {\n  return ({}).toString.call(data) === `[object ${toCaption(type)}]`\n}\n\nexport function def (data, key, val) {\n  Object.defineProperty(data, key, {\n    enumerable: false,\n    configurable: false,\n    writable: true,\n    value: val\n  })\n}\n\nexport function proxy (vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get () {\n      return vm[source][key]\n    },\n    set (newVal) {\n      vm[source][key] = newVal\n    }\n  })\n}","\n\nconst methods = ['push', 'pop', 'shift', 'unshift', 'reverse', 'sort', 'splice']\n\nconst oldArrayMethods = Array.prototype\n\nexport const arrayMethods = Object.create(oldArrayMethods)\n\n\nmethods.forEach(method => {\n  arrayMethods[method] = function (...args) {\n    const ob = this.__ob__\n    let ret = oldArrayMethods[method].apply(this, args)\n\n    let inserted;\n\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break;\n      case splice:\n        inserted = args.slice(2)\n      default:\n        break;\n    }\n\n    if (inserted) ob.observerArray(inserted)\n\n    return ret\n  }\n})","import { isObject, isType, def } from '../util/index'\nimport { arrayMethods } from './array.js'\n\nclass Observer {\n  constructor (data) {\n\n    // data.__ob__ = this\n    def(data, '__ob__', this)\n\n    if (Array.isArray(data)) {\n      data.__proto__ = arrayMethods\n      this.observerArray(data)\n    } else {\n      this.walk(data)\n    }\n\n  }\n  observerArray (data) {\n    data.forEach(val => {\n      observe(val)\n    })\n  }\n\n  walk (data) {\n    let keys = Object.keys(data)\n\n    keys.forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n\n}\n\nfunction defineReactive (data, key, val) {\n  observe(val)\n  Object.defineProperty(data, key, {\n    get () {\n      return val\n    },\n    set (newVal) {\n      if (newVal === val) return\n      observe(newVal)\n      val = newVal\n    }\n  })\n}\nexport function observe (data) {\n  if (!isObject(data)) return\n\n  return new Observer(data)\n}","import { observe } from './observer/index.js'\nimport { proxy } from './util/index.js'\n\nexport function initState (vm) {\n  console.log('init state')\n\n  const opts = vm.$options\n\n\n  if (opts.props) {\n    initProps(vm)\n  }\n\n  if (opts.methods) {\n    initMethod(vm)\n  }\n\n  if (opts.data) {\n    initData(vm)\n  }\n\n  if (opts.computed) {\n    initComputed(vm)\n  }\n\n  if (opts.watch) {\n    initWatch(vm)\n  }\n\n\n}\n\nfunction initProps (vm) {\n  console.log('init props')\n}\n\nfunction initMethod (vm) {\n  console.log('init method')\n}\n\nfunction initData (vm) {\n  let data = vm.$options.data\n  vm._data = data = typeof data === 'function' ? data.call(vm) : data\n\n  for (let p in data) {\n    proxy(vm, '_data', p)\n  }\n\n  observe(data)\n  console.log('init data', data)\n}\n\nfunction initComputed (vm) {\n  console.log('init computed')\n}\n\nfunction initWatch (vm) {\n  console.log('init watch')\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\nconst startTagClose = /^\\s*(\\/?)>/\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n\nconst stack = []\nconst ELEMENT_TYPE = 1\nconst TEXT_TYPE = 3\n\nlet root = null\nlet currentParent = null\n\n\nfunction createASTElement (tag, attrs) {\n  return {\n    type: ELEMENT_TYPE,\n    tag,\n    attrs,\n    children: [],\n    parent: null\n  }\n}\n\nfunction start ({ tag, attrs }) {\n  let el = createASTElement(tag, attrs)\n\n  if (!root) root = el\n\n  currentParent = el\n\n  stack.push(el)\n}\n\nfunction chars (text) {\n  text = text.trim()\n  if (text) {\n    currentParent.children.push({\n      text,\n      type: TEXT_TYPE\n    })\n  }\n}\n\nfunction end () {\n\n  let el = stack.pop()\n\n  currentParent = stack[stack.length - 1]\n\n  if (currentParent) {\n    el.parent = currentParent\n    currentParent.children.push(el)\n  }\n}\n\nexport function parseHTML (html) {\n  while (html) {\n    let textEnd = html.indexOf('<')\n    if (textEnd === 0) {\n      let startTagMatch = parseStartTag(html);\n      if (startTagMatch) {\n        start(startTagMatch)\n        continue\n      }\n\n      let endTagMatch = html.match(endTag)\n      if (endTagMatch) {\n        end(endTagMatch)\n        advance(endTagMatch[0].length)\n        continue\n      }\n    }\n\n    let text\n    if (textEnd >= 0) {\n      text = html.substring(0, textEnd)\n    }\n\n    if (text) {\n      chars(text)\n      advance(text.length)\n    }\n  }\n\n  function advance (n) {\n    html = html.substring(n)\n  }\n\n  function parseStartTag () {\n    let start = html.match(startTagOpen)\n\n    if (start) {\n      const match = {\n        tag: start[1],\n        attrs: []\n      }\n      advance(start[0].length)\n\n      let end\n      let attr\n\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n        advance(attr[0].length)\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5]\n        })\n      }\n\n      if (end) {\n        advance(end[0].length)\n        return match\n      }\n    }\n\n  }\n\n  return root\n}","const ELEMENT_TYPE = 1\nconst TEXT_TYPE = 3\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\nfunction genProps (attrs) {\n  let str = ''\n  attrs.forEach(attr => {\n    switch (attr.name) {\n      case 'style':\n        let obj = {}\n        attr.value.split(';').forEach(item => {\n          const [key, val] = item.split(':')\n          obj[key] = val\n        })\n        attr.value = obj\n        break;\n      default:\n        break;\n    }\n    str += `\"${attr.name}\":${JSON.stringify(attr.value)},`\n  })\n\n  return `{${str.slice(0, -1)}}`\n}\n\nfunction genChildren (children) {\n  return `${children.map(genChild).join(',')}`\n}\n\nfunction genChild (child) {\n  if (child.type === ELEMENT_TYPE) {\n    return generate(child)\n  } else {\n\n    let { text } = child\n    let tokens = []\n    let match = null\n    let index = -1\n    let lastIndex = defaultTagRE.lastIndex = 0\n\n    while (match = defaultTagRE.exec(text)) {\n      index = match.index\n\n      if (index > lastIndex) {\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n      }\n      tokens.push(`_s(${match[1].trim()})`)\n      lastIndex = index + match[0].length\n    }\n\n    if (lastIndex < text.length) {\n      tokens.push(JSON.stringify(text.slice(lastIndex)))\n    }\n\n    return `_v(${tokens.join('+')})`\n  }\n}\nexport function generate (el) {\n  const { tag, children, attrs } = el\n\n  let code = `_c(\"${tag}\",\n    ${(attrs && attrs.length > 0) ? genProps(attrs) : 'undefined'},\n    ${(children && children.length > 0) ? genChildren(children) : ''})`\n\n  return code\n}","\nimport { parseHTML } from './parseHTML'\nimport { generate } from './genCode'\n\nexport function compileToFunction (templete) {\n\n  // parse html\n  const root = parseHTML(templete)\n\n  const code = generate(root)\n\n  const renderFn = new Function(`with(this){return ${code}}`)\n\n  return renderFn\n}\n\n","class Watcher {\n  constructor (vm, exprOrFn, callback, options) {\n    this.vm = vm\n    this.callback = callback\n    this.options = options\n\n    this.getter = exprOrFn\n\n    this.get()\n  }\n\n  get () {\n    this.getter()\n  }\n\n  update () {\n\n  }\n\n  notify () {\n\n  }\n}\n\n\nexport default Watcher","\n\n\nexport function patch (oldVnode, vnode) {\n  console.log(oldVnode, vnode)\n}","import Watcher from './observer/warcher'\nimport { patch } from './vdom/patch'\n\nexport function mountComponent (vm, el) {\n  const { options: opts } = vm\n\n  vm.$el = el\n\n  let updateComponent = () => {\n    // return vdom\n    // vdom => dom\n    vm._update(vm._render())\n  }\n\n  // renderWatcher args->true\n  new Watcher(vm, updateComponent, () => { }, true)\n}\n\nexport function lifecycleMixin (Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this\n\n    vm.$el = patch(vm.$el, vnode)\n  }\n}","import { initState } from './state'\nimport { compileToFunction } from './compiler/index'\nimport { mountComponent } from './lifecycle'\n\n\nexport function initMixin (Vue) {\n  Vue.prototype._init = function (options) {\n    console.log('_init')\n    const vm = this\n    vm.$options = options\n\n\n    initState(vm);\n\n    if (vm.$options.el) vm.$mount(vm.$options.el)\n\n\n  }\n\n\n  Vue.prototype.$mount = function (el) {\n    const vm = this\n    const opts = vm.$options\n    el = document.querySelector(el)\n\n    let templete\n    let render\n    // priority  render-> template -> el\n    if (opts.render) {\n      render = opts.render\n    } else if (opts.templete) {\n      templete = opts.templete\n      render = compileToFunction(templete)\n    } else {\n      templete = el.outerHTML\n      render = compileToFunction(templete)\n    }\n\n    opts.render = render\n\n    mountComponent(vm, el)\n  }\n}\n\n\n","\n\nfunction vnode (tag, data, key, children, text) {\n  return {\n    tag, data, key, children, text\n  }\n}\n\n\n\nexport function createElement (tag, data = {}, ...children) {\n  const { key } = data\n  key && delete data.key\n\n  return vnode(tag, data, key, children, undefined)\n}\n\nexport function createTextNode (text) {\n  return vnode(undefined, undefined, undefined, undefined, text)\n}\n\n","import { createElement, createTextNode } from './vdom/create-element'\n\n\nexport function renderMixin (Vue) {\n\n  Vue.prototype._c = function (...args) {\n    return createElement(...args)\n  }\n\n  Vue.prototype._v = function (text) {\n    return createTextNode(text)\n  }\n\n  Vue.prototype._s = function (val) {\n    return val == null ? '' : (typeof val === 'object' ? JSON.stringify(val) : val)\n  }\n\n\n  Vue.prototype._render = function () {\n    const vm = this\n    const { render } = vm.$options\n    return render.call(vm)\n  }\n}","import { initMixin } from './init'\nimport { renderMixin } from './render'\nimport { lifecycleMixin } from './lifecycle'\n\n\nfunction Vue (options) {\n  this._init(options)\n}\n\ninitMixin(Vue)\n\nrenderMixin(Vue)\n\nlifecycleMixin(Vue)\n\n\nexport default Vue\n"],"names":["isObject","data","def","key","val","Object","defineProperty","enumerable","configurable","writable","value","proxy","vm","source","get","set","newVal","methods","oldArrayMethods","Array","prototype","arrayMethods","create","forEach","method","args","ob","__ob__","ret","apply","inserted","splice","slice","observerArray","Observer","constructor","isArray","__proto__","walk","observe","keys","defineReactive","initState","console","log","opts","$options","props","initProps","initMethod","initData","computed","initComputed","watch","initWatch","_data","call","p","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","attribute","stack","ELEMENT_TYPE","TEXT_TYPE","root","currentParent","createASTElement","tag","attrs","type","children","parent","start","el","push","chars","text","trim","end","pop","length","parseHTML","html","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","genProps","str","obj","split","item","JSON","stringify","genChildren","map","genChild","join","child","generate","tokens","index","lastIndex","exec","code","compileToFunction","templete","renderFn","Function","Watcher","exprOrFn","callback","options","getter","update","notify","patch","oldVnode","vnode","mountComponent","$el","updateComponent","_update","_render","lifecycleMixin","Vue","initMixin","_init","$mount","document","querySelector","render","outerHTML","createElement","undefined","createTextNode","renderMixin","_c","_v","_s"],"mappings":";;;;;;;;EAOO,SAASA,QAAT,CAAmBC,IAAnB,EAAyB;EAC9B,SAAOA,IAAI,IAAI,OAAOA,IAAP,KAAgB,QAA/B;EACD;EAMM,SAASC,GAAT,CAAcD,IAAd,EAAoBE,GAApB,EAAyBC,GAAzB,EAA8B;EACnCC,EAAAA,MAAM,CAACC,cAAP,CAAsBL,IAAtB,EAA4BE,GAA5B,EAAiC;EAC/BI,IAAAA,UAAU,EAAE,KADmB;EAE/BC,IAAAA,YAAY,EAAE,KAFiB;EAG/BC,IAAAA,QAAQ,EAAE,IAHqB;EAI/BC,IAAAA,KAAK,EAAEN;EAJwB,GAAjC;EAMD;EAEM,SAASO,KAAT,CAAgBC,EAAhB,EAAoBC,MAApB,EAA4BV,GAA5B,EAAiC;EACtCE,EAAAA,MAAM,CAACC,cAAP,CAAsBM,EAAtB,EAA0BT,GAA1B,EAA+B;EAC7BW,IAAAA,GAAG,GAAI;EACL,aAAOF,EAAE,CAACC,MAAD,CAAF,CAAWV,GAAX,CAAP;EACD,KAH4B;;EAI7BY,IAAAA,GAAG,CAAEC,MAAF,EAAU;EACXJ,MAAAA,EAAE,CAACC,MAAD,CAAF,CAAWV,GAAX,IAAkBa,MAAlB;EACD;;EAN4B,GAA/B;EAQD;;EC/BD,MAAMC,OAAO,GAAG,CAAC,MAAD,EAAS,KAAT,EAAgB,OAAhB,EAAyB,SAAzB,EAAoC,SAApC,EAA+C,MAA/C,EAAuD,QAAvD,CAAhB;EAEA,MAAMC,eAAe,GAAGC,KAAK,CAACC,SAA9B;EAEO,MAAMC,YAAY,GAAGhB,MAAM,CAACiB,MAAP,CAAcJ,eAAd,CAArB;EAGPD,OAAO,CAACM,OAAR,CAAgBC,MAAM,IAAI;EACxBH,EAAAA,YAAY,CAACG,MAAD,CAAZ,GAAuB,UAAU,GAAGC,IAAb,EAAmB;EACxC,UAAMC,EAAE,GAAG,KAAKC,MAAhB;EACA,QAAIC,GAAG,GAAGV,eAAe,CAACM,MAAD,CAAf,CAAwBK,KAAxB,CAA8B,IAA9B,EAAoCJ,IAApC,CAAV;EAEA,QAAIK,QAAJ;;EAEA,YAAQN,MAAR;EACE,WAAK,MAAL;EACA,WAAK,SAAL;EACEM,QAAAA,QAAQ,GAAGL,IAAX;EACA;;EACF,WAAKM,MAAL;EACED,QAAAA,QAAQ,GAAGL,IAAI,CAACO,KAAL,CAAW,CAAX,CAAX;EANJ;;EAWA,QAAIF,QAAJ,EAAcJ,EAAE,CAACO,aAAH,CAAiBH,QAAjB;EAEd,WAAOF,GAAP;EACD,GApBD;EAqBD,CAtBD;;ECNA,MAAMM,QAAN,CAAe;EACbC,EAAAA,WAAW,CAAElC,IAAF,EAAQ;EAEjB;EACAC,IAAAA,GAAG,CAACD,IAAD,EAAO,QAAP,EAAiB,IAAjB,CAAH;;EAEA,QAAIkB,KAAK,CAACiB,OAAN,CAAcnC,IAAd,CAAJ,EAAyB;EACvBA,MAAAA,IAAI,CAACoC,SAAL,GAAiBhB,YAAjB;EACA,WAAKY,aAAL,CAAmBhC,IAAnB;EACD,KAHD,MAGO;EACL,WAAKqC,IAAL,CAAUrC,IAAV;EACD;EAEF;;EACDgC,EAAAA,aAAa,CAAEhC,IAAF,EAAQ;EACnBA,IAAAA,IAAI,CAACsB,OAAL,CAAanB,GAAG,IAAI;EAClBmC,MAAAA,OAAO,CAACnC,GAAD,CAAP;EACD,KAFD;EAGD;;EAEDkC,EAAAA,IAAI,CAAErC,IAAF,EAAQ;EACV,QAAIuC,IAAI,GAAGnC,MAAM,CAACmC,IAAP,CAAYvC,IAAZ,CAAX;EAEAuC,IAAAA,IAAI,CAACjB,OAAL,CAAapB,GAAG,IAAI;EAClBsC,MAAAA,cAAc,CAACxC,IAAD,EAAOE,GAAP,EAAYF,IAAI,CAACE,GAAD,CAAhB,CAAd;EACD,KAFD;EAGD;;EA1BY;;EA8Bf,SAASsC,cAAT,CAAyBxC,IAAzB,EAA+BE,GAA/B,EAAoCC,GAApC,EAAyC;EACvCmC,EAAAA,OAAO,CAACnC,GAAD,CAAP;EACAC,EAAAA,MAAM,CAACC,cAAP,CAAsBL,IAAtB,EAA4BE,GAA5B,EAAiC;EAC/BW,IAAAA,GAAG,GAAI;EACL,aAAOV,GAAP;EACD,KAH8B;;EAI/BW,IAAAA,GAAG,CAAEC,MAAF,EAAU;EACX,UAAIA,MAAM,KAAKZ,GAAf,EAAoB;EACpBmC,MAAAA,OAAO,CAACvB,MAAD,CAAP;EACAZ,MAAAA,GAAG,GAAGY,MAAN;EACD;;EAR8B,GAAjC;EAUD;;EACM,SAASuB,OAAT,CAAkBtC,IAAlB,EAAwB;EAC7B,MAAI,CAACD,QAAQ,CAACC,IAAD,CAAb,EAAqB;EAErB,SAAO,IAAIiC,QAAJ,CAAajC,IAAb,CAAP;EACD;;EC/CM,SAASyC,SAAT,CAAoB9B,EAApB,EAAwB;EAC7B+B,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;EAEA,QAAMC,IAAI,GAAGjC,EAAE,CAACkC,QAAhB;;EAGA,MAAID,IAAI,CAACE,KAAT,EAAgB;EACdC,IAAAA,SAAS,CAAA,CAAT;EACD;;EAED,MAAIH,IAAI,CAAC5B,OAAT,EAAkB;EAChBgC,IAAAA,UAAU,CAAA,CAAV;EACD;;EAED,MAAIJ,IAAI,CAAC5C,IAAT,EAAe;EACbiD,IAAAA,QAAQ,CAACtC,EAAD,CAAR;EACD;;EAED,MAAIiC,IAAI,CAACM,QAAT,EAAmB;EACjBC,IAAAA,YAAY,CAAA,CAAZ;EACD;;EAED,MAAIP,IAAI,CAACQ,KAAT,EAAgB;EACdC,IAAAA,SAAS,CAAA,CAAT;EACD;EAGF;;EAED,SAASN,SAAT,CAAoBpC,EAApB,EAAwB;EACtB+B,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;EACD;;EAED,SAASK,UAAT,CAAqBrC,EAArB,EAAyB;EACvB+B,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;EACD;;EAED,SAASM,QAAT,CAAmBtC,EAAnB,EAAuB;EACrB,MAAIX,IAAI,GAAGW,EAAE,CAACkC,QAAH,CAAY7C,IAAvB;EACAW,EAAAA,EAAE,CAAC2C,KAAH,GAAWtD,IAAI,GAAG,OAAOA,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACuD,IAAL,CAAU5C,EAAV,CAA7B,GAA6CX,IAA/D;;EAEA,OAAK,IAAIwD,CAAT,IAAcxD,IAAd,EAAoB;EAClBU,IAAAA,KAAK,CAACC,EAAD,EAAK,OAAL,EAAc6C,CAAd,CAAL;EACD;;EAEDlB,EAAAA,OAAO,CAACtC,IAAD,CAAP;EACA0C,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyB3C,IAAzB;EACD;;EAED,SAASmD,YAAT,CAAuBxC,EAAvB,EAA2B;EACzB+B,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;EACD;;EAED,SAASU,SAAT,CAAoB1C,EAApB,EAAwB;EACtB+B,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;EACD;;EC1DD,MAAMc,MAAM,GAAI,8BAAhB;EACA,MAAMC,YAAY,GAAI,OAAMD,MAAO,QAAOA,MAAO,GAAjD;EACA,MAAME,YAAY,GAAG,IAAIC,MAAJ,CAAY,KAAIF,YAAa,EAA7B,CAArB;EACA,MAAMG,aAAa,GAAG,YAAtB;EACA,MAAMC,MAAM,GAAG,IAAIF,MAAJ,CAAY,QAAOF,YAAa,QAAhC,CAAf;EACA,MAAMK,SAAS,GAAG,2EAAlB;EAGA,MAAMC,KAAK,GAAG,EAAd;EACA,MAAMC,YAAY,GAAG,CAArB;EACA,MAAMC,SAAS,GAAG,CAAlB;EAEA,IAAIC,IAAI,GAAG,IAAX;EACA,IAAIC,aAAa,GAAG,IAApB;;EAGA,SAASC,gBAAT,CAA2BC,GAA3B,EAAgCC,KAAhC,EAAuC;EACrC,SAAO;EACLC,IAAAA,IAAI,EAAEP,YADD;EAELK,IAAAA,GAFK;EAGLC,IAAAA,KAHK;EAILE,IAAAA,QAAQ,EAAE,EAJL;EAKLC,IAAAA,MAAM,EAAE;EALH,GAAP;EAOD;;EAED,SAASC,KAAT,CAAgB;EAAEL,EAAAA,GAAF;EAAOC,EAAAA;EAAP,CAAhB,EAAgC;EAC9B,MAAIK,EAAE,GAAGP,gBAAgB,CAACC,GAAD,EAAMC,KAAN,CAAzB;EAEA,MAAI,CAACJ,IAAL,EAAWA,IAAI,GAAGS,EAAP;EAEXR,EAAAA,aAAa,GAAGQ,EAAhB;EAEAZ,EAAAA,KAAK,CAACa,IAAN,CAAWD,EAAX;EACD;;EAED,SAASE,KAAT,CAAgBC,IAAhB,EAAsB;EACpBA,EAAAA,IAAI,GAAGA,IAAI,CAACC,IAAL,EAAP;;EACA,MAAID,IAAJ,EAAU;EACRX,IAAAA,aAAa,CAACK,QAAd,CAAuBI,IAAvB,CAA4B;EAC1BE,MAAAA,IAD0B;EAE1BP,MAAAA,IAAI,EAAEN;EAFoB,KAA5B;EAID;EACF;;EAED,SAASe,GAAT,GAAgB;EAEd,MAAIL,EAAE,GAAGZ,KAAK,CAACkB,GAAN,EAAT;EAEAd,EAAAA,aAAa,GAAGJ,KAAK,CAACA,KAAK,CAACmB,MAAN,GAAe,CAAhB,CAArB;;EAEA,MAAIf,aAAJ,EAAmB;EACjBQ,IAAAA,EAAE,CAACF,MAAH,GAAYN,aAAZ;EACAA,IAAAA,aAAa,CAACK,QAAd,CAAuBI,IAAvB,CAA4BD,EAA5B;EACD;EACF;;EAEM,SAASQ,SAAT,CAAoBC,IAApB,EAA0B;EAC/B,SAAOA,IAAP,EAAa;EACX,QAAIC,OAAO,GAAGD,IAAI,CAACE,OAAL,CAAa,GAAb,CAAd;;EACA,QAAID,OAAO,KAAK,CAAhB,EAAmB;EACjB,UAAIE,aAAa,GAAGC,aAAa,CAAA,CAAjC;;EACA,UAAID,aAAJ,EAAmB;EACjBb,QAAAA,KAAK,CAACa,aAAD,CAAL;EACA;EACD;;EAED,UAAIE,WAAW,GAAGL,IAAI,CAACM,KAAL,CAAW7B,MAAX,CAAlB;;EACA,UAAI4B,WAAJ,EAAiB;EACfT,QAAAA,GAAG,CAAA,CAAH;EACAW,QAAAA,OAAO,CAACF,WAAW,CAAC,CAAD,CAAX,CAAeP,MAAhB,CAAP;EACA;EACD;EACF;;EAED,QAAIJ,IAAJ;;EACA,QAAIO,OAAO,IAAI,CAAf,EAAkB;EAChBP,MAAAA,IAAI,GAAGM,IAAI,CAACQ,SAAL,CAAe,CAAf,EAAkBP,OAAlB,CAAP;EACD;;EAED,QAAIP,IAAJ,EAAU;EACRD,MAAAA,KAAK,CAACC,IAAD,CAAL;EACAa,MAAAA,OAAO,CAACb,IAAI,CAACI,MAAN,CAAP;EACD;EACF;;EAED,WAASS,OAAT,CAAkBE,CAAlB,EAAqB;EACnBT,IAAAA,IAAI,GAAGA,IAAI,CAACQ,SAAL,CAAeC,CAAf,CAAP;EACD;;EAED,WAASL,aAAT,GAA0B;EACxB,QAAId,KAAK,GAAGU,IAAI,CAACM,KAAL,CAAWhC,YAAX,CAAZ;;EAEA,QAAIgB,KAAJ,EAAW;EACT,YAAMgB,KAAK,GAAG;EACZrB,QAAAA,GAAG,EAAEK,KAAK,CAAC,CAAD,CADE;EAEZJ,QAAAA,KAAK,EAAE;EAFK,OAAd;EAIAqB,MAAAA,OAAO,CAACjB,KAAK,CAAC,CAAD,CAAL,CAASQ,MAAV,CAAP;EAEA,UAAIF,GAAJ;EACA,UAAIc,IAAJ;;EAEA,aAAO,EAAEd,GAAG,GAAGI,IAAI,CAACM,KAAL,CAAW9B,aAAX,CAAR,MAAuCkC,IAAI,GAAGV,IAAI,CAACM,KAAL,CAAW5B,SAAX,CAA9C,CAAP,EAA6E;EAC3E6B,QAAAA,OAAO,CAACG,IAAI,CAAC,CAAD,CAAJ,CAAQZ,MAAT,CAAP;EACAQ,QAAAA,KAAK,CAACpB,KAAN,CAAYM,IAAZ,CAAiB;EACfmB,UAAAA,IAAI,EAAED,IAAI,CAAC,CAAD,CADK;EAEftF,UAAAA,KAAK,EAAEsF,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAf,IAAsBA,IAAI,CAAC,CAAD;EAFlB,SAAjB;EAID;;EAED,UAAId,GAAJ,EAAS;EACPW,QAAAA,OAAO,CAACX,GAAG,CAAC,CAAD,CAAH,CAAOE,MAAR,CAAP;EACA,eAAOQ,KAAP;EACD;EACF;EAEF;;EAED,SAAOxB,IAAP;EACD;;ECzHD,MAAMF,cAAY,GAAG,CAArB;EAEA,MAAMgC,YAAY,GAAG,0BAArB;;EACA,SAASC,QAAT,CAAmB3B,KAAnB,EAA0B;EACxB,MAAI4B,GAAG,GAAG,EAAV;EACA5B,EAAAA,KAAK,CAACjD,OAAN,CAAcyE,IAAI,IAAI;EACpB,YAAQA,IAAI,CAACC,IAAb;EACE,WAAK,OAAL;EACE,YAAII,GAAG,GAAG,EAAV;EACAL,QAAAA,IAAI,CAACtF,KAAL,CAAW4F,KAAX,CAAiB,GAAjB,EAAsB/E,OAAtB,CAA8BgF,IAAI,IAAI;EACpC,gBAAM,CAACpG,GAAD,EAAMC,GAAN,IAAamG,IAAI,CAACD,KAAL,CAAW,GAAX,CAAnB;EACAD,UAAAA,GAAG,CAAClG,GAAD,CAAH,GAAWC,GAAX;EACD,SAHD;EAIA4F,QAAAA,IAAI,CAACtF,KAAL,GAAa2F,GAAb;EACA;EARJ;;EAYAD,IAAAA,GAAG,IAAK,IAAGJ,IAAI,CAACC,IAAK,KAAIO,IAAI,CAACC,SAAL,CAAeT,IAAI,CAACtF,KAApB,CAA2B,GAApD;EACD,GAdD;EAgBA,SAAQ,IAAG0F,GAAG,CAACpE,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd,CAAiB,GAA5B;EACD;;EAED,SAAS0E,WAAT,CAAsBhC,QAAtB,EAAgC;EAC9B,SAAQ,GAAEA,QAAQ,CAACiC,GAAT,CAAaC,QAAb,EAAuBC,IAAvB,CAA4B,GAA5B,CAAiC,EAA3C;EACD;;EAED,SAASD,QAAT,CAAmBE,KAAnB,EAA0B;EACxB,MAAIA,KAAK,CAACrC,IAAN,KAAeP,cAAnB,EAAiC;EAC/B,WAAO6C,QAAQ,CAACD,KAAD,CAAf;EACD,GAFD,MAEO;EAEL,QAAI;EAAE9B,MAAAA;EAAF,QAAW8B,KAAf;EACA,QAAIE,MAAM,GAAG,EAAb;EACA,QAAIpB,KAAK,GAAG,IAAZ;EACA,QAAIqB,KAAK,GAAG,CAAC,CAAb;EACA,QAAIC,SAAS,GAAGhB,YAAY,CAACgB,SAAb,GAAyB,CAAzC;;EAEA,WAAOtB,KAAK,GAAGM,YAAY,CAACiB,IAAb,CAAkBnC,IAAlB,CAAf,EAAwC;EACtCiC,MAAAA,KAAK,GAAGrB,KAAK,CAACqB,KAAd;;EAEA,UAAIA,KAAK,GAAGC,SAAZ,EAAuB;EACrBF,QAAAA,MAAM,CAAClC,IAAP,CAAY0B,IAAI,CAACC,SAAL,CAAezB,IAAI,CAAChD,KAAL,CAAWkF,SAAX,EAAsBD,KAAtB,CAAf,CAAZ;EACD;;EACDD,MAAAA,MAAM,CAAClC,IAAP,CAAa,MAAKc,KAAK,CAAC,CAAD,CAAL,CAASX,IAAT,EAAgB,GAAlC;EACAiC,MAAAA,SAAS,GAAGD,KAAK,GAAGrB,KAAK,CAAC,CAAD,CAAL,CAASR,MAA7B;EACD;;EAED,QAAI8B,SAAS,GAAGlC,IAAI,CAACI,MAArB,EAA6B;EAC3B4B,MAAAA,MAAM,CAAClC,IAAP,CAAY0B,IAAI,CAACC,SAAL,CAAezB,IAAI,CAAChD,KAAL,CAAWkF,SAAX,CAAf,CAAZ;EACD;;EAED,WAAQ,MAAKF,MAAM,CAACH,IAAP,CAAY,GAAZ,CAAiB,GAA9B;EACD;EACF;;EACM,SAASE,QAAT,CAAmBlC,EAAnB,EAAuB;EAC5B,QAAM;EAAEN,IAAAA,GAAF;EAAOG,IAAAA,QAAP;EAAiBF,IAAAA;EAAjB,MAA2BK,EAAjC;EAEA,MAAIuC,IAAI,GAAI,OAAM7C,GAAI;MACjBC,KAAK,IAAIA,KAAK,CAACY,MAAN,GAAe,CAAzB,GAA8Be,QAAQ,CAAC3B,KAAD,CAAtC,GAAgD,WAAY;MAC3DE,QAAQ,IAAIA,QAAQ,CAACU,MAAT,GAAkB,CAA/B,GAAoCsB,WAAW,CAAChC,QAAD,CAA/C,GAA4D,EAAG,GAFnE;EAIA,SAAO0C,IAAP;EACD;;EC5DM,SAASC,iBAAT,CAA4BC,QAA5B,EAAsC;EAE3C;EACA,QAAMlD,IAAI,GAAGiB,SAAS,CAACiC,QAAD,CAAtB;EAEA,QAAMF,IAAI,GAAGL,QAAQ,CAAC3C,IAAD,CAArB;EAEA,QAAMmD,QAAQ,GAAG,IAAIC,QAAJ,CAAc,qBAAoBJ,IAAK,GAAvC,CAAjB;EAEA,SAAOG,QAAP;EACD;;ECdD,MAAME,OAAN,CAAc;EACZtF,EAAAA,WAAW,CAAEvB,EAAF,EAAM8G,QAAN,EAAgBC,QAAhB,EAA0BC,OAA1B,EAAmC;EAC5C,SAAKhH,EAAL,GAAUA,EAAV;EACA,SAAK+G,QAAL,GAAgBA,QAAhB;EACA,SAAKC,OAAL,GAAeA,OAAf;EAEA,SAAKC,MAAL,GAAcH,QAAd;EAEA,SAAK5G,GAAL;EACD;;EAEDA,EAAAA,GAAG,GAAI;EACL,SAAK+G,MAAL;EACD;;EAEDC,EAAAA,MAAM,GAAI;;EAIVC,EAAAA,MAAM,GAAI;;EAnBE;;ECGP,SAASC,KAAT,CAAgBC,QAAhB,EAA0BC,KAA1B,EAAiC;EACtCvF,EAAAA,OAAO,CAACC,GAAR,CAAYqF,QAAZ,EAAsBC,KAAtB;EACD;;ECFM,SAASC,cAAT,CAAyBvH,EAAzB,EAA6BiE,EAA7B,EAAiC;EAGtCjE,EAAAA,EAAE,CAACwH,GAAH,GAASvD,EAAT;;EAEA,MAAIwD,eAAe,GAAG,MAAM;EAC1B;EACA;EACAzH,IAAAA,EAAE,CAAC0H,OAAH,CAAW1H,EAAE,CAAC2H,OAAH,EAAX;EACD,GAJD,CALsC;;;EAYtC,MAAId,OAAJ,CAAY7G,EAAZ,EAAgByH,eAAhB,EAAiC,MAAM,EAAvC,EAA4C,IAA5C;EACD;EAEM,SAASG,cAAT,CAAyBC,GAAzB,EAA8B;EACnCA,EAAAA,GAAG,CAACrH,SAAJ,CAAckH,OAAd,GAAwB,UAAUJ,KAAV,EAAiB;EACvC,UAAMtH,EAAE,GAAG,IAAX;EAEAA,IAAAA,EAAE,CAACwH,GAAH,GAASJ,KAAK,CAACpH,EAAE,CAACwH,GAAJ,EAASF,KAAT,CAAd;EACD,GAJD;EAKD;;ECnBM,SAASQ,SAAT,CAAoBD,GAApB,EAAyB;EAC9BA,EAAAA,GAAG,CAACrH,SAAJ,CAAcuH,KAAd,GAAsB,UAAUf,OAAV,EAAmB;EACvCjF,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;EACA,UAAMhC,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACkC,QAAH,GAAc8E,OAAd;EAGAlF,IAAAA,SAAS,CAAC9B,EAAD,CAAT;EAEA,QAAIA,EAAE,CAACkC,QAAH,CAAY+B,EAAhB,EAAoBjE,EAAE,CAACgI,MAAH,CAAUhI,EAAE,CAACkC,QAAH,CAAY+B,EAAtB;EAGrB,GAXD;;EAcA4D,EAAAA,GAAG,CAACrH,SAAJ,CAAcwH,MAAd,GAAuB,UAAU/D,EAAV,EAAc;EACnC,UAAMjE,EAAE,GAAG,IAAX;EACA,UAAMiC,IAAI,GAAGjC,EAAE,CAACkC,QAAhB;EACA+B,IAAAA,EAAE,GAAGgE,QAAQ,CAACC,aAAT,CAAuBjE,EAAvB,CAAL;EAEA,QAAIyC,QAAJ;EACA,QAAIyB,MAAJ,CANmC;;EAQnC,QAAIlG,IAAI,CAACkG,MAAT,EAAiB;EACfA,MAAAA,MAAM,GAAGlG,IAAI,CAACkG,MAAd;EACD,KAFD,MAEO,IAAIlG,IAAI,CAACyE,QAAT,EAAmB;EACxBA,MAAAA,QAAQ,GAAGzE,IAAI,CAACyE,QAAhB;EACAyB,MAAAA,MAAM,GAAG1B,iBAAiB,CAACC,QAAD,CAA1B;EACD,KAHM,MAGA;EACLA,MAAAA,QAAQ,GAAGzC,EAAE,CAACmE,SAAd;EACAD,MAAAA,MAAM,GAAG1B,iBAAiB,CAACC,QAAD,CAA1B;EACD;;EAEDzE,IAAAA,IAAI,CAACkG,MAAL,GAAcA,MAAd;EAEAZ,IAAAA,cAAc,CAACvH,EAAD,EAAKiE,EAAL,CAAd;EACD,GArBD;EAsBD;;ECxCD,SAASqD,KAAT,CAAgB3D,GAAhB,EAAqBtE,IAArB,EAA2BE,GAA3B,EAAgCuE,QAAhC,EAA0CM,IAA1C,EAAgD;EAC9C,SAAO;EACLT,IAAAA,GADK;EACAtE,IAAAA,IADA;EACME,IAAAA,GADN;EACWuE,IAAAA,QADX;EACqBM,IAAAA;EADrB,GAAP;EAGD;;EAIM,SAASiE,aAAT,CAAwB1E,GAAxB,EAA6BtE,IAAI,GAAG,EAApC,EAAwC,GAAGyE,QAA3C,EAAqD;EAC1D,QAAM;EAAEvE,IAAAA;EAAF,MAAUF,IAAhB;EACAE,EAAAA,GAAG,IAAI,OAAOF,IAAI,CAACE,GAAnB;EAEA,SAAO+H,KAAK,CAAC3D,GAAD,EAAMtE,IAAN,EAAYE,GAAZ,EAAiBuE,QAAjB,EAA2BwE,SAA3B,CAAZ;EACD;EAEM,SAASC,cAAT,CAAyBnE,IAAzB,EAA+B;EACpC,SAAOkD,KAAK,CAACgB,SAAD,EAAYA,SAAZ,EAAuBA,SAAvB,EAAkCA,SAAlC,EAA6ClE,IAA7C,CAAZ;EACD;;EChBM,SAASoE,WAAT,CAAsBX,GAAtB,EAA2B;EAEhCA,EAAAA,GAAG,CAACrH,SAAJ,CAAciI,EAAd,GAAmB,UAAU,GAAG5H,IAAb,EAAmB;EACpC,WAAOwH,aAAa,CAAC,GAAGxH,IAAJ,CAApB;EACD,GAFD;;EAIAgH,EAAAA,GAAG,CAACrH,SAAJ,CAAckI,EAAd,GAAmB,UAAUtE,IAAV,EAAgB;EACjC,WAAOmE,cAAc,CAACnE,IAAD,CAArB;EACD,GAFD;;EAIAyD,EAAAA,GAAG,CAACrH,SAAJ,CAAcmI,EAAd,GAAmB,UAAUnJ,GAAV,EAAe;EAChC,WAAOA,GAAG,IAAI,IAAP,GAAc,EAAd,GAAoB,OAAOA,GAAP,KAAe,QAAf,GAA0BoG,IAAI,CAACC,SAAL,CAAerG,GAAf,CAA1B,GAAgDA,GAA3E;EACD,GAFD;;EAKAqI,EAAAA,GAAG,CAACrH,SAAJ,CAAcmH,OAAd,GAAwB,YAAY;EAClC,UAAM3H,EAAE,GAAG,IAAX;EACA,UAAM;EAAEmI,MAAAA;EAAF,QAAanI,EAAE,CAACkC,QAAtB;EACA,WAAOiG,MAAM,CAACvF,IAAP,CAAY5C,EAAZ,CAAP;EACD,GAJD;EAKD;;EClBD,SAAS6H,GAAT,CAAcb,OAAd,EAAuB;EACrB,OAAKe,KAAL,CAAWf,OAAX;EACD;;EAEDc,SAAS,CAACD,GAAD,CAAT;EAEAW,WAAW,CAACX,GAAD,CAAX;EAEAD,cAAc,CAACC,GAAD,CAAd;;;;;;;;"}