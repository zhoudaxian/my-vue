{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observer/array.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parseHTML.js","../../src/compiler/genCode.js","../../src/compiler/index.js","../../src/util/next-tick.js","../../src/observer/scheduler.js","../../src/observer/warcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/create-element.js","../../src/render.js","../../src/globalAPI/index.js","../../src/index.js"],"sourcesContent":["\nfunction toCaption (str) {\n  if (typeof str !== 'string') throw Error('toCaption\\'s parmas must be a string')\n\n  return str.slice(0, 1).toUpperCase() + str.slice(1)\n}\n\nexport function isObject (data) {\n  return data && typeof data === 'object'\n}\n\nexport function isType (data, type) {\n  return ({}).toString.call(data) === `[object ${toCaption(type)}]`\n}\n\nexport function def (data, key, val) {\n  Object.defineProperty(data, key, {\n    enumerable: false,\n    configurable: false,\n    writable: true,\n    value: val\n  })\n}\n\nexport function proxy (vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get () {\n      return vm[source][key]\n    },\n    set (newVal) {\n      vm[source][key] = newVal\n    }\n  })\n}\n\nconst LIFTCYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestory',\n  'destotyed',\n  'activated',\n  'deactivated',\n  'errorCaptured'\n]\n\nconst strats = {}\n\nLIFTCYCLE_HOOKS.forEach(hook => strats[hook] = mergeHook)\n\nfunction mergeHook (targetHooks, sourceHooks) {\n  if (sourceHooks) {\n    return targetHooks ? targetHooks.concat(sourceHooks) : [sourceHooks]\n  }\n  return targetHooks\n}\n\nexport function mergeOptions (target, source) {\n  const opts = {}\n  const targetKeys = Object.keys(target)\n  const sourceKeys = Object.keys(source)\n\n  targetKeys.forEach(key => {\n    if (LIFTCYCLE_HOOKS.includes(key)) {\n      opts[key] = strats[key](target[key], source[key])\n    } else if (isObject(key)) {\n      opts[key] = mergeOptions(target[key], source[key])\n    } else {\n      opts[key] = source[key] == null ? target[key] : source[key]\n    }\n  })\n\n  sourceKeys.forEach(key => {\n    if (LIFTCYCLE_HOOKS.includes(key)) {\n      opts[key] = strats[key](target[key], source[key])\n    } else if (!opts[key]) {\n      opts[key] = source[key]\n    }\n  })\n\n  return opts\n}","const methods = ['push', 'pop', 'shift', 'unshift', 'reverse', 'sort', 'splice']\n\nconst oldArrayMethods = Array.prototype\n\nexport const arrayMethods = Object.create(oldArrayMethods)\n\nmethods.forEach(method => {\n  arrayMethods[method] = function (...args) {\n    const ob = this.__ob__\n    let ret = oldArrayMethods[method].apply(this, args)\n\n    let inserted;\n\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break;\n      case 'splice':\n        inserted = args.slice(2)\n      default:\n        break;\n    }\n\n    if (inserted) ob.observerArray(inserted)\n\n    ob.dep.notify()\n\n    return ret\n  }\n})","\n\nlet id = 0\nconst stack = []\n\nexport default class Dep {\n  constructor () {\n    this.id = id++\n    this.subs = []\n\n  }\n\n  addSub (watcher) {\n    this.subs.push(watcher)\n  }\n\n  // 收集依赖\n  depend () {\n    Dep.target.addDep(this)\n  }\n\n  notify () {\n    this.subs.forEach(watcher => watcher.update())\n  }\n\n}\n\nDep.target = null\n\nexport function pushTarget (watcher) {\n  Dep.target = watcher\n  stack.push(watcher)\n}\n\nexport function popTarget () {\n  stack.pop()\n  Dep.target = stack[stack.length - 1]\n}","import { isObject, isType, def } from '../util/index'\nimport { arrayMethods } from './array.js'\nimport Dep from './dep'\n\nclass Observer {\n  constructor (data) {\n    this.dep = new Dep()\n\n    def(data, '__ob__', this)\n\n    if (Array.isArray(data)) {\n      data.__proto__ = arrayMethods\n      this.observerArray(data)\n    } else {\n      this.walk(data)\n    }\n\n  }\n\n  observerArray (data) {\n    data.forEach(val => {\n      observe(val)\n    })\n  }\n\n  walk (data) {\n    let keys = Object.keys(data)\n\n    keys.forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n\n}\n\nfunction defineReactive (data, key, val) {\n  const dep = new Dep()\n\n  const childOb = observe(val)\n\n  Object.defineProperty(data, key, {\n    configurable: true,\n    enumerable: true,\n    get () {\n      if (Dep.target) {\n        dep.depend()\n\n        // array dep收集watcher\n        if (childOb) {\n          childOb.dep.depend()\n\n          if (Array.isArray(val)) {\n            dependArray(val)\n          }\n        }\n\n      }\n      return val\n    },\n    set (newVal) {\n      if (newVal === val) return\n      observe(newVal)\n      val = newVal\n\n      dep.notify()\n    }\n  })\n}\nexport function observe (data) {\n  if (!isObject(data)) return\n\n  return new Observer(data)\n}\n\n\nfunction dependArray (arr) {\n  arr.forEach(val => {\n    const { __ob__: ob } = val\n    ob && ob.dep.depend()\n    if (Array.isArray(val)) {\n      dependArray(val)\n    }\n  })\n}","import { observe } from './observer/index.js'\nimport { proxy } from './util/index.js'\n\nexport function initState (vm) {\n  console.log('init state')\n\n  const opts = vm.$options\n\n\n  if (opts.props) {\n    initProps(vm)\n  }\n\n  if (opts.methods) {\n    initMethod(vm)\n  }\n\n  if (opts.data) {\n    initData(vm)\n  }\n\n  if (opts.computed) {\n    initComputed(vm)\n  }\n\n  if (opts.watch) {\n    initWatch(vm)\n  }\n\n\n}\n\nfunction initProps (vm) {\n  console.log('init props')\n}\n\nfunction initMethod (vm) {\n  console.log('init method')\n}\n\nfunction initData (vm) {\n  let data = vm.$options.data\n  vm._data = data = typeof data === 'function' ? data.call(vm) : data\n\n  for (let p in data) {\n    proxy(vm, '_data', p)\n  }\n\n  observe(data)\n  console.log('init data', data)\n}\n\nfunction initComputed (vm) {\n  console.log('init computed')\n}\n\nfunction initWatch (vm) {\n  console.log('init watch')\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\nconst startTagClose = /^\\s*(\\/?)>/\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n\nconst stack = []\nconst ELEMENT_TYPE = 1\nconst TEXT_TYPE = 3\n\nlet root = null\nlet currentParent = null\n\n\nfunction createASTElement (tag, attrs) {\n  return {\n    type: ELEMENT_TYPE,\n    tag,\n    attrs,\n    children: [],\n    parent: null\n  }\n}\n\nfunction start ({ tag, attrs }) {\n  let el = createASTElement(tag, attrs)\n\n  if (!root) root = el\n\n  currentParent = el\n\n  stack.push(el)\n}\n\nfunction chars (text) {\n  text = text.trim()\n  if (text) {\n    currentParent.children.push({\n      text,\n      type: TEXT_TYPE\n    })\n  }\n}\n\nfunction end () {\n\n  let el = stack.pop()\n\n  currentParent = stack[stack.length - 1]\n\n  if (currentParent) {\n    el.parent = currentParent\n    currentParent.children.push(el)\n  }\n}\n\nexport function parseHTML (html) {\n  while (html) {\n    let textEnd = html.indexOf('<')\n    if (textEnd === 0) {\n      let startTagMatch = parseStartTag(html);\n      if (startTagMatch) {\n        start(startTagMatch)\n        continue\n      }\n\n      let endTagMatch = html.match(endTag)\n      if (endTagMatch) {\n        end(endTagMatch)\n        advance(endTagMatch[0].length)\n        continue\n      }\n    }\n\n    let text\n    if (textEnd >= 0) {\n      text = html.substring(0, textEnd)\n    }\n\n    if (text) {\n      chars(text)\n      advance(text.length)\n    }\n  }\n\n  function advance (n) {\n    html = html.substring(n)\n  }\n\n  function parseStartTag () {\n    let start = html.match(startTagOpen)\n\n    if (start) {\n      const match = {\n        tag: start[1],\n        attrs: []\n      }\n      advance(start[0].length)\n\n      let end\n      let attr\n\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n        advance(attr[0].length)\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5]\n        })\n      }\n\n      if (end) {\n        advance(end[0].length)\n        return match\n      }\n    }\n\n  }\n\n  return root\n}","const ELEMENT_TYPE = 1\nconst TEXT_TYPE = 3\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\nfunction genProps (attrs) {\n  let str = ''\n  attrs.forEach(attr => {\n    switch (attr.name) {\n      case 'style':\n        let obj = {}\n        attr.value.split(';').forEach(item => {\n          const [key, val] = item.split(':')\n          obj[key] = val\n        })\n        attr.value = obj\n        break;\n      default:\n        break;\n    }\n    str += `\"${attr.name}\":${JSON.stringify(attr.value)},`\n  })\n\n  return `{${str.slice(0, -1)}}`\n}\n\nfunction genChildren (children) {\n  return `${children.map(genChild).join(',')}`\n}\n\nfunction genChild (child) {\n  if (child.type === ELEMENT_TYPE) {\n    return generate(child)\n  } else {\n\n    let { text } = child\n    let tokens = []\n    let match = null\n    let index = -1\n    let lastIndex = defaultTagRE.lastIndex = 0\n\n    while (match = defaultTagRE.exec(text)) {\n      index = match.index\n\n      if (index > lastIndex) {\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n      }\n      tokens.push(`_s(${match[1].trim()})`)\n      lastIndex = index + match[0].length\n    }\n\n    if (lastIndex < text.length) {\n      tokens.push(JSON.stringify(text.slice(lastIndex)))\n    }\n\n    return `_v(${tokens.join('+')})`\n  }\n}\nexport function generate (el) {\n  const { tag, children, attrs } = el\n\n  let code = `_c(\"${tag}\",\n    ${(attrs && attrs.length > 0) ? genProps(attrs) : 'undefined'},\n    ${(children && children.length > 0) ? genChildren(children) : ''})`\n\n  return code\n}","\nimport { parseHTML } from './parseHTML'\nimport { generate } from './genCode'\n\nexport function compileToFunction (templete) {\n\n  // parse html\n  const root = parseHTML(templete)\n\n  const code = generate(root)\n\n  const renderFn = new Function(`with(this){return ${code}}`)\n\n  return renderFn\n}\n\n","let callbacks = []\nlet waiting = false\n\n//  Promise  setImmediate  setTimeout\nfunction useAsyncFunc (cb) {\n  if (Promise) {\n    Promise.resolve().then(cb)\n  } else if (setImmediate) {\n    setImmediate(cb)\n  } else {\n    setTimeout(cb, 0)\n  }\n}\n\nfunction flushCallbacks () {\n  callbacks.forEach(cb => cb())\n  waiting = false\n}\n\n// 值的改变会先放入callbacks，手动调用会在其后\nexport function nextTick (callback) {\n\n  // 多次调用nextTick，正在刷新的时候放在callbacks中\n  callbacks.push(callback)\n  if (!waiting) {\n    useAsyncFunc(flushCallbacks);\n    waiting = true\n  }\n\n}","import { nextTick } from '../util/next-tick'\n\nlet queue = []\nlet has = {}\n\nfunction flushSchedulerQueue () {\n  queue.forEach(watcher => watcher.run())\n  queue = []\n  has = {}\n}\n\n\n\nexport function queueWatcher (watcher) {\n  const id = watcher.id\n  if (!has[id]) {\n    has[id] = true\n    queue.push(watcher)\n    nextTick(flushSchedulerQueue)\n  }\n}","import { pushTarget, popTarget } from './dep'\nimport { queueWatcher } from './scheduler.js'\n\nlet id = 0\n\nclass Watcher {\n  constructor (vm, exprOrFn, callback, options) {\n    this.vm = vm\n    this.callback = callback\n    this.options = options\n    this.id = id++\n    this.depsId = new Set()\n    this.deps = []\n\n    this.getter = exprOrFn\n    // new Watcher(vm, () => updateComponent(vm), () => { }, true)\n    // 对于render watcher来讲，调用get/update方法 即调用updateComponent 去更新组件 PS：组件级更新\n    // 注册 render watcher 是在beforeCreate 与created之间 mountComponent方法里\n    // beforeCreate -> initState\n    //  -> initData -> oberser -> defineReactive  ->\n    // created -> $mounted -> 生成render函数 -> 调用mountComponent ->\n    // beforeMount -> new Watcher(vm, () => updateComponent(vm), () => { }, true) // 会去读取数据，收集依赖 ->\n    // mounted\n\n    // 1.在组件初始化数据的时候，将数据变成响应式（Object.defineProperty）\n    // 2.编辑模板生成render函数，\n\n    // new Watcher(vm, () => updateComponent(vm), () => { }, true)\n    // 3.添加renderwatcher,在newwatcher时，去调用get方法即vm._update(vm._render())。 生成vdom 生成真实dom ，挂载\n\n    this.get()\n  }\n  addDep (dep) {\n    const { id } = dep\n\n    if (!this.depsId.has(id)) {\n      this.depsId.add(id)\n      this.deps.push(dep)\n      dep.addSub(this)\n    }\n  }\n\n  get () {\n    pushTarget(this)\n\n    this.getter()\n\n    popTarget(this)\n  }\n\n  update () {\n    queueWatcher(this)\n  }\n\n  run () {\n    this.get()\n  }\n}\n\n\nexport default Watcher","\n\n\nfunction creatElm (vnode) {\n  const { tag, data, children, key, text } = vnode\n\n  if (typeof tag === 'string') {\n    vnode.el = document.createElement(tag)\n    updateProps(vnode)\n    children.forEach(child => { vnode.el.appendChild(creatElm(child)) })\n  } else {\n    vnode.el = document.createTextNode(text)\n  }\n  return vnode.el\n}\n\nfunction updateProps (vnode) {\n  const { el, data: newProps } = vnode\n\n  for (let p in newProps) {\n    if (p === 'style') {\n      for (let styleName in newProps.style) {\n        el.style[styleName] = newProps.style[styleName]\n      }\n    } else if (p === 'class') {\n      el.className = newProps.class\n    } else {\n      el.setAttribute(p, newProps[p])\n    }\n  }\n\n}\n\nexport function patch (oldVnode, vnode) {\n\n  const isRealElement = oldVnode.nodeType\n\n  if (isRealElement) {\n    const oldElm = oldVnode\n    const parentElm = oldElm.parentNode\n\n    const el = creatElm(vnode)\n    parentElm.insertBefore(el, oldElm.nextSibling)\n    parentElm.removeChild(oldElm)\n\n    return el\n  }\n}","import Watcher from './observer/warcher'\nimport { patch } from './vdom/patch'\n\n\nlet updateComponent = (vm) => {\n  // return vdom\n  // vdom => dom\n  vm._update(vm._render())\n}\nexport function mountComponent (vm, el) {\n  const { options: opts } = vm\n\n  vm.$el = el\n\n  callHook(vm, 'beforeMount')\n\n  // renderWatcher args->true\n  new Watcher(vm, () => updateComponent(vm), () => { }, true)\n\n  callHook(vm, 'mounted')\n}\n\nexport function lifecycleMixin (Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this\n\n    vm.$el = patch(vm.$el, vnode)\n  }\n}\n\nexport function callHook (vm, hook) {\n  const handlers = vm.$options[hook]\n  handlers && handlers.forEach(handler => handler.call(vm))\n}","import { initState } from './state'\nimport { compileToFunction } from './compiler/index'\nimport { mountComponent, callHook } from './lifecycle'\nimport { mergeOptions } from './util/index'\nimport { nextTick } from './util/next-tick'\n\nexport function initMixin (Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n\n    vm.$options = mergeOptions(vm.constructor.options, options)\n\n    callHook(vm, 'beforeCreate')\n\n    initState(vm);\n\n    callHook(vm, 'created')\n\n    if (vm.$options.el) vm.$mount(vm.$options.el)\n\n\n  }\n\n\n  Vue.prototype.$mount = function (el) {\n    const vm = this\n    const opts = vm.$options\n    el = document.querySelector(el)\n\n    let templete\n    let render\n\n    // priority  render-> template -> el\n    if (opts.render) {\n      render = opts.render\n    } else if (opts.templete) {\n      templete = opts.templete\n      render = compileToFunction(templete)\n    } else {\n      templete = el.outerHTML\n      render = compileToFunction(templete)\n    }\n\n    opts.render = render\n\n    mountComponent(vm, el)\n  }\n\n\n  Vue.prototype.$nextTick = nextTick\n}\n\n\n","\n\nfunction vnode (tag, data, key, children, text) {\n  return {\n    tag,\n    data,\n    key,\n    children,\n    text,\n    componentOptios: {}\n  }\n}\n\n\n\nexport function createElement (tag, data = {}, ...children) {\n  const { key } = data\n  key && delete data.key\n\n  return vnode(tag, data, key, children, undefined)\n}\n\nexport function createTextNode (text) {\n  return vnode(undefined, undefined, undefined, undefined, text)\n}\n\n","import { createElement, createTextNode } from './vdom/create-element'\n\n\nexport function renderMixin (Vue) {\n\n  Vue.prototype._c = function (...args) {\n    return createElement(...args)\n  }\n\n  Vue.prototype._v = function (text) {\n    return createTextNode(text)\n  }\n\n  Vue.prototype._s = function (val) {\n    return val == null ? '' : (typeof val === 'object' ? JSON.stringify(val) : val)\n  }\n\n\n  Vue.prototype._render = function () {\n    const vm = this\n    const { render } = vm.$options\n    return render.call(vm)\n  }\n}","import { mergeOptions } from '../util/index'\n\n\nexport function initGlobalAPI (Vue) {\n  Vue.options = {}\n  Vue.mixin = function (mixin) {\n    this.options = mergeOptions(this.options, mixin)\n  }\n\n}","import { initMixin } from './init'\nimport { renderMixin } from './render'\nimport { lifecycleMixin } from './lifecycle'\nimport { initGlobalAPI } from './globalAPI/index'\n\nfunction Vue (options) {\n  this._init(options)\n}\n\ninitMixin(Vue)\n\nrenderMixin(Vue)\n\nlifecycleMixin(Vue)\n\ninitGlobalAPI(Vue)\nexport default Vue\n"],"names":["isObject","data","def","key","val","Object","defineProperty","enumerable","configurable","writable","value","proxy","vm","source","get","set","newVal","LIFTCYCLE_HOOKS","strats","forEach","hook","mergeHook","targetHooks","sourceHooks","concat","mergeOptions","target","opts","targetKeys","keys","sourceKeys","includes","methods","oldArrayMethods","Array","prototype","arrayMethods","create","method","args","ob","__ob__","ret","apply","inserted","slice","observerArray","dep","notify","id","stack","Dep","constructor","subs","addSub","watcher","push","depend","addDep","update","pushTarget","popTarget","pop","length","Observer","isArray","__proto__","walk","observe","defineReactive","childOb","dependArray","arr","initState","console","log","$options","props","initProps","initMethod","initData","computed","initComputed","watch","initWatch","_data","call","p","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","attribute","ELEMENT_TYPE","TEXT_TYPE","root","currentParent","createASTElement","tag","attrs","type","children","parent","start","el","chars","text","trim","end","parseHTML","html","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","genProps","str","obj","split","item","JSON","stringify","genChildren","map","genChild","join","child","generate","tokens","index","lastIndex","exec","code","compileToFunction","templete","renderFn","Function","callbacks","waiting","useAsyncFunc","cb","Promise","resolve","then","setImmediate","setTimeout","flushCallbacks","nextTick","callback","queue","has","flushSchedulerQueue","run","queueWatcher","Watcher","exprOrFn","options","depsId","Set","deps","getter","add","creatElm","vnode","document","createElement","updateProps","appendChild","createTextNode","newProps","styleName","style","className","class","setAttribute","patch","oldVnode","isRealElement","nodeType","oldElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","updateComponent","_update","_render","mountComponent","$el","callHook","lifecycleMixin","Vue","handlers","handler","initMixin","_init","$mount","querySelector","render","outerHTML","$nextTick","componentOptios","undefined","renderMixin","_c","_v","_s","initGlobalAPI","mixin"],"mappings":"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"}